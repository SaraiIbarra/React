import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from"react/jsx-runtime";import{describe,it,expect,beforeEach,vi}from"vitest";import{cleanup,fireEvent,render,screen}from"@testing-library/react";import{Router}from"./components/Router.jsx";import{Route}from"./Route.jsx";import{Link}from"./components/Link.jsx";import{getCurrentPath}from"./utils.js";vi.mock("./utils.js",()=>({getCurrentPath:vi.fn()}));describe("Router",()=>{beforeEach(()=>{cleanup();vi.clearAllMocks()});it("should render without problems",()=>{render(/*#__PURE__*/_jsx(Router,{routes:[]}));expect(true).toBeTruthy()});it("should render 404 if no routes match",()=>{render(/*#__PURE__*/_jsx(Router,{routes:[],defaultComponent:()=>/*#__PURE__*/_jsx("h1",{children:"404"})}));expect(screen.getByText("404")).toBeTruthy()});it("should render the component of the first route that matches",()=>{getCurrentPath.mockReturnValue("/about");const ruotes=[{path:"/",Component:()=>/*#__PURE__*/_jsx("h1",{children:"Home"})},{path:"/about",Component:()=>/*#__PURE__*/_jsx("h1",{children:"About"})}];render(/*#__PURE__*/_jsx(Router,{routes:ruotes}));expect(screen.getByText("About")).toBeTruthy()});it("should navigate using Links",async()=>{getCurrentPath.mockReturnValueOnce("/");render(/*#__PURE__*/_jsxs(Router,{children:[/*#__PURE__*/_jsx(Route,{path:"/",Component:()=>{return /*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx("h1",{children:"Home"}),/*#__PURE__*/_jsx(Link,{to:"/about",children:"Go to About"})]})}}),/*#__PURE__*/_jsx(Route,{path:"/about",Component:()=>/*#__PURE__*/_jsx("h1",{children:"About"})})]}));const anchor=screen.getByText(/Go to About/);fireEvent.click(anchor);const aboutTitle=await screen.findByText("About");expect(aboutTitle).toBeTruthy()})});